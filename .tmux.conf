###############################################################################
#
# Global tmux configuration
#
###############################################################################

# 256colors -can also use tmux -2 when calling prog
set -g default-terminal "screen-256color"

set-option -g default-shell /bin/bash

# scrollback buffer n lines
set -g history-limit 10000

# dont rename windows
set -g allow-rename off

# listen for activity on all windows
set -g bell-action any

# Keep tmux msgs around longer
set -g display-time 3000

# on-screen time for display-panes in ms
set -g display-panes-time 3000

# start window indexing at one instead of zero, renumber if any are removed
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Disable the delay between an escape key press and subsequent characters
# http://superuser.com/questions/252214/slight-delay-when-switching-modes-in-vim-using-tmux-or-screen
set -sg escape-time 0

# Resize to smallest active view window
setw -g aggressive-resize on

# Disable mouse both ways and fail quietly, for compatibility between versions
setw -q -g mode-mouse off #  < v2.1
setw -q -g mouse off      # >= v2.1

# Facilitate use of ssh-agent - default values - inherited from parent shell atm
#set -g update-environment "DISPLAY SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY""

# enable wm window titles
set -g set-titles on
# wm window title string (uses statusbar variables)
#set -g set-titles-string "tmux.#I.#W"
#set-option -g set-titles-string ' #W  #S:#I.#P @#T' # window number,program name,active (or not)
set-option -g set-titles-string 'TMUX : #W  #S@#T'
set-window-option -g automatic-rename on

# Set UTF both ways and fail quietly, for compatibility
setw -q -g utf8 on       #  < 2.2
set -q -g status-utf8 on # >= 2.2

#
# --- Keybinds ---
#
# Change prefix to ctrl+a
unbind C-b
set -g prefix C-a
# send the prefix to client inside window (ala nested sessions - C-a C-a C-c)
bind-key C-a send-prefix

#
# --- Statusbar ---
#

# toggle statusbar
bind-key b set-option status

# default statusbar colors
set -g status-fg white
set -g status-bg colour234
set -g status-attr default

# default window title colors
#set-window-option -g window-status-fg cyan
#set-window-option -g window-status-bg blue
#set-window-option -g window-status-attr dim
# Inactive/default windows in status bar
set-window-option -g window-status-format '#[bg=colour234,fg=colour60,dim] #I #W#[bg=colour234,fg=color244,dim]#F '

# active window title colors
#set-window-option -g window-status-current-fg blue
#set-window-option -g window-status-current-bg cyan
#set-window-option -g window-status-current-attr dim
set-window-option -g window-status-current-format '#[bg=colour244,fg=colour232] #I #W #[default]'

# Alerted window in status bar. Windows which have an alert (bell, activity or content).
#set-window-option -g window-status-alert-fg red
#set-window-option -g window-status-alert-bg white

# command/message line colors
set -g message-fg white
set -g message-bg black
set -g message-attr bright

# center align the window list
set -g status-justify left

# Status bar text / commands
set -g status-right ""
set -g status-left ""

set -g status-left "#[bg=black,fg=colour244,dim][ #[bg=black,fg=white,bright]#H #[bg=black,fg=colour244]] #[default]"
set -g status-left-length 20
#set -g status-right "#[fg=colour67]%a %Y-%m-%d #[fg=colour143,dim]%H:%M #[default]"
set -g status-right "#[fg=white,dim]#(/sbin/ip addr show tun0 2>/dev/null | /bin/grep 10.10.| /usr/bin/awk '{ print \"tun0 = \",$2}')     #[fg=colour67]%a %Y-%m-%d #[fg=colour143,dim]%H:%M #[default]"
set -g status-right-length 50
